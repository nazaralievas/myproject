{% extends 'core/base.html' %}

{% block title %}{{ movie.name }}{% endblock %}

{% block content %}

<!-- –ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞ -->
<h2 class="text-center text-primary fw-bold mb-4">
    üé¨ {{ movie.name }}
</h2>

<div class="row mb-5 align-items-start">

    <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –∫–∞—Ä—Ç–∏–Ω–∫–∞ -->
    <div class="col-md-5 mb-3">
        <img src="{{ movie.image.url }}" class="img-fluid rounded shadow-sm w-100">
    </div>

    <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –æ–ø–∏—Å–∞–Ω–∏–µ -->
    <div class="col-md-7">
        <h5 class="text-secondary fw-semibold mb-2">–û–ø–∏—Å–∞–Ω–∏–µ</h5>
        <p class="text-muted fs-5">
            {{ movie.description }}
        </p>
    </div>

</div>

<hr class="my-4">

<!-- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ -->
<h4 class="text-primary fw-bold mb-3">üí¨ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</h4>

{% if user.is_authenticated %}
<div class="card shadow-sm mb-4">
    <div class="card-body">
        <form method="POST">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit" class="btn btn-primary">
                –û—Å—Ç–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
            </button>
        </form>
    </div>
</div>
{% else %}
<div class="alert alert-info">
    <a href="{% url 'register' %}" class="fw-semibold">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å</a>, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤
    <br>
    <a href="{% url 'login' %}">–ò–ª–∏ –≤–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç</a>
</div>
{% endif %}

<!-- –°–ø–∏—Å–æ–∫ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ -->
{% for comment in movie.comments.all %}
<div class="card shadow-sm mb-3">
    <div class="card-body">

        <div class="d-flex justify-content-between mb-1">
            <strong class="text-primary">{{ comment.user }}</strong>
            <small class="text-muted">{{ comment.date_created }}</small>
        </div>

        <p class="mb-0">
            {{ comment.text }}
        </p>

    </div>
</div>
{% empty %}
<p class="text-muted">–ü–æ–∫–∞ –Ω–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤. –ë—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º!</p>
{% endfor %}

{% endblock content %}